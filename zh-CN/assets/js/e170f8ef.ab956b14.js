"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9459],{88908:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>o,contentTitle:()=>s,default:()=>p,frontMatter:()=>l,metadata:()=>c,toc:()=>d});var t=i(74848),a=i(28453);const l={title:"\u62a5\u8868 API",description:"\u7edf\u8ba1\u5206\u6790\u7684\u62a5\u8868API\uff0c\u7528\u4e8e\u83b7\u53d6\u62a5\u8868\u6570\u636e\u3002"},s=void 0,c={id:"developer/api/analytics-api",title:"\u62a5\u8868 API",description:"\u7edf\u8ba1\u5206\u6790\u7684\u62a5\u8868API\uff0c\u7528\u4e8e\u83b7\u53d6\u62a5\u8868\u6570\u636e\u3002",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/developer/api/analytics-api.mdx",sourceDirName:"developer/api",slug:"/developer/api/analytics-api",permalink:"/zh-CN/developer/api/analytics-api",draft:!1,unlisted:!1,editUrl:"https://github.com/steedos/steedos-docs/tree/master/i18n/zh-CN/docusaurus-plugin-content-docs/current/developer/api/analytics-api.mdx",tags:[],version:"current",frontMatter:{title:"\u62a5\u8868 API",description:"\u7edf\u8ba1\u5206\u6790\u7684\u62a5\u8868API\uff0c\u7528\u4e8e\u83b7\u53d6\u62a5\u8868\u6570\u636e\u3002"},sidebar:"developer",previous:{title:"\u63a5\u53e3\u9a8c\u8bc1",permalink:"/zh-CN/developer/api/api-validate"},next:{title:"\u6d41\u7a0b API",permalink:"/zh-CN/developer/api/api-process"}},o={},d=[{value:"\u83b7\u53d6API",id:"\u83b7\u53d6api",level:2},{value:"\u83b7\u53d6\u7ed3\u679c",id:"\u83b7\u53d6\u7ed3\u679c",level:2},{value:"\u62a5\u8868\u6570\u636e\u7ed3\u6784",id:"\u62a5\u8868\u6570\u636e\u7ed3\u6784",level:2},{value:"\u62a5\u8868\u6570\u636e\u793a\u4f8b",id:"\u62a5\u8868\u6570\u636e\u793a\u4f8b",level:2},{value:"API\u5e94\u7528\u793a\u4f8b",id:"api\u5e94\u7528\u793a\u4f8b",level:2}];function r(n){const e={blockquote:"blockquote",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h2,{id:"\u83b7\u53d6api",children:"\u83b7\u53d6API"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u5728\u8bbe\u7f6e-\u7edf\u8ba1\u5206\u6790-\u62a5\u8868 \u65b0\u5efa\u62a5\u8868\u5e76\u4fdd\u5b58"}),"\n",(0,t.jsx)(e.li,{children:"\u5728\u8bbe\u7f6e-\u7edf\u8ba1\u5206\u6790-\u62a5\u8868 \u62a5\u8868\u8be6\u7ec6\u9875\uff0c\u5f00\u53d1\u6807\u7b7e\u4e0b\u590d\u5236API"}),"\n"]}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsxs)(e.p,{children:["API \u683c\u5f0f\uff1a ",(0,t.jsx)(e.code,{children:"{ROOT_URL}/analytics/api/amis/question/{questionId}"})]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"\u83b7\u53d6\u7ed3\u679c",children:"\u83b7\u53d6\u7ed3\u679c"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u5728\u6d4f\u89c8\u5668\u8bbf\u95eeAPI\uff0c\u83b7\u53d6\u62a5\u8868\u6570\u636e"}),"\n",(0,t.jsx)(e.li,{children:"\u8fd4\u56de\u7ed3\u679c\u4e3aJSON\u683c\u5f0f"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"\u62a5\u8868\u6570\u636e\u7ed3\u6784",children:"\u62a5\u8868\u6570\u636e\u7ed3\u6784"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n    "status": 0, // 0 \u8868\u793a\u6210\u529f\n    "msg": "ok",\n    "data": {\n        "count": {count}, // \u6570\u636e\u884c\u6570\n        "rows": [ // \u6570\u636e\n            {\n                "{key}": "{value}",\n                ...\n            },\n        ],\n        "cols": [ // \u6570\u636e\u5217\u5b9a\u4e49\n            {\n                "id": "",\n                "name": "",\n                "display_name": "",\n                "base_type": "",\n                "effective_type": "",\n                "semantic_type": null,\n                "field_ref": [\n                    "field",\n                    "",\n                    null\n                ],\n                "source": "",\n                "visibility_type": "",\n                "table_id": "",\n                ...\n            },\n        ]\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u62a5\u8868\u6570\u636e\u793a\u4f8b",children:"\u62a5\u8868\u6570\u636e\u793a\u4f8b"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n    "status": 0,\n    "msg": "ok",\n    "data": {\n        "count": 10,\n        "rows": [\n            {\n                "_id": "65d6a69b1b9cab05bf584fc5_65a49dca55d1b305bf065324",\n                "category": "65d6a69b1b9cab05bf584fc5_659cb4a972192405bf822170",\n                "type": "\u706b\u8f66\u7968",\n                "invoice_date": "2023-07-05T00:00:00.000Z",\n                "invoice_num": "149Z058272",\n                "invoice_amount": 91.5,\n                "seller_name": null,\n                "purchaser_name": null,\n                "name": "Demo-FP-00001",\n                "verify_status": "\u4e0d\u67e5\u9a8c",\n                "created": "2024-02-22T09:42:52.159Z",\n                "external_category": "\u4ea4\u901a\u8d39"\n            },\n            {\n                "_id": "65d6a69b1b9cab05bf584fc5_65a49e1f55d1b305bf06532a",\n                "category": "65d6a69b1b9cab05bf584fc5_659cb4a972192405bf822170",\n                "type": "\u51fa\u79df\u8f66\u7968",\n                "invoice_date": "2023-06-07T00:00:00.000Z",\n                "invoice_num": "02833771",\n                "invoice_amount": 26,\n                "seller_name": null,\n                "purchaser_name": null,\n                "name": "Demo-FP-00002",\n                "verify_status": "\u4e0d\u67e5\u9a8c",\n                "created": "2024-02-22T09:42:52.159Z",\n                "external_category": "\u4ea4\u901a\u8d39"\n            },\n        ],\n        "cols": [\n            {\n                "description": null,\n                "database_type": "java.lang.String",\n                "semantic_type": "type/PK", // \u4e3b\u952e\n                "table_id": "invoices",\n                "coercion_strategy": null,\n                "name": "_id",\n                "fingerprint_version": 0,\n                "has_field_values": "search",\n                "settings": null,\n                "caveats": null,\n                "fk_target_field_id": null,\n                "dimensions": [],\n                "dimension_options": [],\n                "updated_at": "2023-08-04T05:39:33.039939",\n                "custom_position": 0,\n                "effective_type": "type/Text",\n                "active": true,\n                "nfc_path": null,\n                "parent_id": null,\n                "id": "invoices._id",\n                "last_analyzed": null,\n                "database_is_auto_increment": false,\n                "position": 0,\n                "visibility_type": "normal",\n                "default_dimension_option": null,\n                "target": null,\n                "preview_display": true,\n                "display_name": "ID",\n                "database_position": 0,\n                "database_required": false,\n                "fingerprint": null,\n                "created_at": "2023-08-04T05:39:33.039939",\n                "base_type": "type/Text",\n                "points_of_interest": null\n            },\n            {\n                "id": "invoices.category",\n                "name": "category",\n                "display_name": "\u8d39\u7528\u7c7b\u522b",\n                "base_type": "type/Text",\n                "effective_type": "type/Text",\n                "semantic_type": "type/FK", // \u5916\u952e\n                "field_ref": [\n                    "field",\n                    "invoices.category",\n                    null\n                ],\n                "source": "fields",\n                "visibility_type": "normal",\n                "table_id": "invoices",\n                "remapped_to": "external_category"\n            },\n            {\n                "id": "invoices.type",\n                "name": "type",\n                "display_name": "\u53d1\u7968\u7c7b\u578b",\n                "base_type": "type/Text",\n                "effective_type": "type/Text",\n                "semantic_type": null,\n                "field_ref": [\n                    "field",\n                    "invoices.type",\n                    null\n                ],\n                "source": "fields",\n                "visibility_type": "normal",\n                "table_id": "invoices"\n            },\n            {\n                "id": "invoices.invoice_date",\n                "name": "invoice_date",\n                "display_name": "\u53d1\u7968\u65e5\u671f",\n                "base_type": "type/Date",\n                "effective_type": "type/Date",\n                "semantic_type": null,\n                "field_ref": [\n                    "field",\n                    "invoices.invoice_date",\n                    null\n                ],\n                "source": "fields",\n                "visibility_type": "normal",\n                "table_id": "invoices"\n            },\n            {\n                "id": "invoices.invoice_num",\n                "name": "invoice_num",\n                "display_name": "\u53d1\u7968\u53f7\u7801",\n                "base_type": "type/Text",\n                "effective_type": "type/Text",\n                "semantic_type": null,\n                "field_ref": [\n                    "field",\n                    "invoices.invoice_num",\n                    null\n                ],\n                "source": "fields",\n                "visibility_type": "normal",\n                "table_id": "invoices"\n            },\n            {\n                "id": "invoices.invoice_amount",\n                "name": "invoice_amount",\n                "display_name": "\u53d1\u7968\u542b\u7a0e\u91d1\u989d",\n                "base_type": "type/Float",\n                "effective_type": "type/Float",\n                "semantic_type": "type/Score",\n                "field_ref": [\n                    "field",\n                    "invoices.invoice_amount",\n                    null\n                ],\n                "source": "fields",\n                "visibility_type": "normal",\n                "table_id": "invoices"\n            },\n            {\n                "id": "invoices.seller_name",\n                "name": "seller_name",\n                "display_name": "\u9500\u552e\u65b9\u540d\u79f0",\n                "base_type": "type/Text",\n                "effective_type": "type/Text",\n                "semantic_type": null,\n                "field_ref": [\n                    "field",\n                    "invoices.seller_name",\n                    null\n                ],\n                "source": "fields",\n                "visibility_type": "normal",\n                "table_id": "invoices"\n            },\n            {\n                "id": "invoices.purchaser_name",\n                "name": "purchaser_name",\n                "display_name": "\u8d2d\u65b9\u540d\u79f0",\n                "base_type": "type/Text",\n                "effective_type": "type/Text",\n                "semantic_type": null,\n                "field_ref": [\n                    "field",\n                    "invoices.purchaser_name",\n                    null\n                ],\n                "source": "fields",\n                "visibility_type": "normal",\n                "table_id": "invoices"\n            },\n            {\n                "id": "invoices.name",\n                "name": "name",\n                "display_name": "\u53d1\u7968\u7f16\u53f7",\n                "base_type": "type/Text",\n                "effective_type": "type/Text",\n                "semantic_type": null,\n                "field_ref": [\n                    "field",\n                    "invoices.name",\n                    null\n                ],\n                "source": "fields",\n                "visibility_type": "normal",\n                "table_id": "invoices"\n            },\n            {\n                "id": "invoices.verify_status",\n                "name": "verify_status",\n                "display_name": "\u67e5\u9a8c\u72b6\u6001",\n                "base_type": "type/Text",\n                "effective_type": "type/Text",\n                "semantic_type": null,\n                "field_ref": [\n                    "field",\n                    "invoices.verify_status",\n                    null\n                ],\n                "source": "fields",\n                "visibility_type": "normal",\n                "table_id": "invoices"\n            },\n            {\n                "id": "invoices.created",\n                "name": "created",\n                "display_name": "\u521b\u5efa\u65f6\u95f4",\n                "base_type": "type/DateTime",\n                "effective_type": "type/DateTime",\n                "semantic_type": null,\n                "field_ref": [\n                    "field",\n                    "invoices.created",\n                    null\n                ],\n                "source": "fields",\n                "visibility_type": "normal",\n                "table_id": "invoices"\n            },\n            {\n                "description": null,\n                "semantic_type": "type/Name",\n                "table_id": "expense_category",\n                "coercion_strategy": null,\n                "name": "external_category",\n                "settings": null,\n                "source": "fields",\n                "remapped_from": "category",\n                "fk_field_id": "category",\n                "field_ref": [\n                    "field",\n                    "expense_category.name",\n                    {\n                        "source-field": "invoices.category"\n                    }\n                ],\n                "effective_type": "type/Text",\n                "nfc_path": null,\n                "parent_id": null,\n                "id": "expense_category.name",\n                "visibility_type": "normal",\n                "display_name": "\u8d39\u7528\u7c7b\u522b"\n            }\n        ]\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"api\u5e94\u7528\u793a\u4f8b",children:"API\u5e94\u7528\u793a\u4f8b"}),"\n",(0,t.jsx)(e.p,{children:"\u4f7f\u7528devextreme-datagrid\u63a7\u4ef6\u5c55\u793a\u6570\u636e\uff0c\u4ee5feikongwang\u9879\u76ee\u7684\u53d1\u7968\u5bf9\u8c61\u4e3a\u4f8b\uff1a"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u5728\u8bbe\u7f6e-\u7edf\u8ba1\u5206\u6790-\u62a5\u8868 \u65b0\u5efa\u62a5\u8868\u53d1\u7968\u5e76\u4fdd\u5b58"}),"\n",(0,t.jsx)(e.li,{children:"\u5728\u8bbe\u7f6e-\u7edf\u8ba1\u5206\u6790-\u62a5\u8868 \u53d1\u7968\u62a5\u8868\u8be6\u7ec6\u9875\uff0c\u5f00\u53d1\u6807\u7b7e\u4e0b\u590d\u5236API \u7559\u4f5c\u5907\u7528"}),"\n",(0,t.jsx)(e.li,{children:"\u5728\u8bbe\u7f6e-\u81ea\u5b9a\u4e49\u5e94\u7528-\u5fae\u9875\u9762 \u65b0\u5efa\u7c7b\u578b\u4e3a\u5e94\u7528\u7a0b\u5e8f\u9875\u9762\u7684\u5fae\u9875\u9762"}),"\n",(0,t.jsx)(e.li,{children:"\u8fdb\u5165\u8bbe\u8ba1\u5668\u53ef\u5728\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u6807\u7b7e\u4e0b\u67e5\u770b\u5230DataGrid\u7ec4\u4ef6"}),"\n"]}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\u5982\u679c\u6ca1\u770b\u5230\u7ec4\u4ef6\uff0c\u8bf4\u660e\u7ec4\u4ef6\u672a\u52a0\u8f7d\uff0c\u9700\u8981\u5728\u9879\u76ee\u7684.env\u6587\u4ef6\u4e2d\u914d\u7f6e\u73af\u5883\u53d8\u91cfSTEEDOS_WIDGETS_ADDITIONAL=@steedos-widgets/devextreme"}),"\n"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u5c06\u4ee5\u4e0b\u793a\u4f8b\u4ee3\u7801\u62f7\u8d1d\u81f3\u4ee3\u7801\u6846\u4e2d\uff0c\u5e76\u4fee\u6539service\u7ec4\u4ef6\u7684\u6570\u636e\u63a5\u53e3\u5730\u5740\u4e3a\u53d1\u7968\u62a5\u8868\u4e2d\u590d\u5236\u7684API\uff0c\u6700\u540e\u4fdd\u5b58\u5e76\u53d1\u5e03\u5fae\u9875\u9762"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:'{\n    "type": "page",\n    "title": "Welcome to Steedos",\n    "body": [\n        {\n            "type": "service",\n            "body": [\n                {\n                    "type": "devextreme-datagrid",\n                    "className": "",\n                    "config": {\n                        "keyExpr": "_id",\n                        "columns": [\n                            {\n                                "dataField": "_id",\n                                "caption": "ID",\n                                "name": "_id"\n                            },\n                            {\n                                "dataField": "name",\n                                "name": "name"\n                            }\n                        ],\n                        "allowColumnResizing": true,\n                        "columnAutoWidth": true,\n                        "groupPanel": {\n                            "visible": true\n                        },\n                        "columnChooser": {\n                            "enabled": true\n                        },\n                        "filterRow": {\n                            "visible": true\n                        },\n                        "searchPanel": {\n                            "visible": true\n                        }\n                    },\n                    "id": "u:a38c09bec4a6",\n                    "dataFilter": "config.dataSource = data.rows;\\nconfig.columns = [];\\n\\ndata.cols.forEach((col) => {\\n  if (\\"type/FK\\" === col.semantic_type || \\"type/PK\\" === col.semantic_type) { \\n    return\\n  }\\n  config.columns.push({\\n    name: col.name,\\n    caption: col.display_name,\\n    dataField: col.name\\n  })\\n})\\nconsole.log(config)\\nreturn config;"\n                }\n            ],\n            "id": "u:70563d1bcdba",\n            "messages": {},\n            "api": {\n                "url": "https://5000-sapphire-felidae-9bexhf1x.ws.vscode.steedos.cn/analytics/api/amis/question/65d6a9b81b9cab05bf584fc6",\n                "method": "get",\n                "messages": {},\n                "requestAdaptor": "",\n                "adaptor": ""\n            },\n            "initFetch": true\n        }\n    ],\n    "regions": [\n        "body"\n    ],\n    "data": {\n        "initialValues": {},\n        "appId": "builder",\n        "title": "",\n        "context": {\n            "rootUrl": "https://5000-fuchsia-mackerel-vjg1ha6z.ws.vscode.steedos.cn",\n            "userId": "222dcc20-1adf-49c0-83e6-8eb7b4df673e",\n            "tenantId": "65b9c01273b2ae064641fc81",\n            "authToken": ""\n        }\n    },\n    "id": "u:b84e5ec519fa"\n}\n'})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u5728\u8bbe\u7f6e-\u81ea\u5b9a\u4e49\u5e94\u7528-\u9009\u9879\u5361\u4e2d\u65b0\u5efa\u9009\u9879\u5361"}),"\n",(0,t.jsx)(e.li,{children:"\u5728\u8bbe\u7f6e-\u81ea\u5b9a\u4e49\u5e94\u7528-\u5e94\u7528\u7a0b\u5e8f\u4e2d\u65b0\u5efa\u5e94\u7528\u7a0b\u5e8f\uff0c\u5728\u9009\u9879\u5361-\u8bbe\u7f6e\u9009\u9879\u5361\u4e2d\u9009\u62e9\u521a\u521a\u65b0\u5efa\u7684\u9009\u9879\u5361"}),"\n",(0,t.jsx)(e.li,{children:"\u70b9\u51fb\u5de6\u4e0a\u89d2\u5e94\u7528\u7a0b\u5e8f\u542f\u52a8\u5668\u8fdb\u5165\u521a\u521a\u65b0\u5efa\u7684\u5e94\u7528\u5373\u53ef\u770b\u5230\u53d1\u7968\u6570\u636e\u3002"}),"\n"]})]})}function p(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(r,{...n})}):r(n)}},28453:(n,e,i)=>{i.d(e,{R:()=>s,x:()=>c});var t=i(96540);const a={},l=t.createContext(a);function s(n){const e=t.useContext(l);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:s(n.components),t.createElement(l.Provider,{value:e},n.children)}}}]);