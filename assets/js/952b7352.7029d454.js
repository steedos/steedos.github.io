"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3274],{60644:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>o,frontMatter:()=>t,metadata:()=>d,toc:()=>c});var r=s(74848),i=s(28453);const t={title:"Process API",description:"\u6839\u636e\u6d41\u7a0b\u7684\u5143\u6570\u636e\u5b9a\u4e49\uff0c\u81ea\u52a8\u751f\u6210\u5ba1\u6279\u76f8\u5173API\u3002"},l=void 0,d={id:"developer/api/api-process",title:"Process API",description:"\u6839\u636e\u6d41\u7a0b\u7684\u5143\u6570\u636e\u5b9a\u4e49\uff0c\u81ea\u52a8\u751f\u6210\u5ba1\u6279\u76f8\u5173API\u3002",source:"@site/docs/developer/api/api-process.mdx",sourceDirName:"developer/api",slug:"/developer/api/api-process",permalink:"/developer/api/api-process",draft:!1,unlisted:!1,editUrl:"https://github.com/steedos/steedos-docs/tree/master/docs/developer/api/api-process.mdx",tags:[],version:"current",frontMatter:{title:"Process API",description:"\u6839\u636e\u6d41\u7a0b\u7684\u5143\u6570\u636e\u5b9a\u4e49\uff0c\u81ea\u52a8\u751f\u6210\u5ba1\u6279\u76f8\u5173API\u3002"},sidebar:"developer",previous:{title:"\u62a5\u8868 API",permalink:"/developer/api/analytics-api"},next:{title:"Plugins",permalink:"/developer/plugins/"}},a={},c=[{value:"Interface Validation",id:"interface-validation",level:2},{value:"API List",id:"api-list",level:2},{value:"API Specifications",id:"api-specifications",level:2},{value:"Start Approval",id:"start-approval",level:3},{value:"URI",id:"uri",level:4},{value:"Method",id:"method",level:4},{value:"Request Parameters",id:"request-parameters",level:4},{value:"Response",id:"response",level:4},{value:"Save Draft Approval Form",id:"save-draft-approval-form",level:3},{value:"URI",id:"uri-1",level:4},{value:"Method",id:"method-1",level:4},{value:"Request parameters.",id:"request-parameters-1",level:4},{value:"Response",id:"response-1",level:4},{value:"Submitting a Draft Application",id:"submitting-a-draft-application",level:3},{value:"URI",id:"uri-2",level:4},{value:"Method",id:"method-2",level:4},{value:"Request Parameters",id:"request-parameters-2",level:4},{value:"Response",id:"response-2",level:4},{value:"Submitting an Approval Application",id:"submitting-an-approval-application",level:3},{value:"URI",id:"uri-3",level:4},{value:"Method",id:"method-3",level:4},{value:"Request Parameters",id:"request-parameters-3",level:4},{value:"Response",id:"response-3",level:4}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Specifications for Low-code platform's workflow engine related API interfaces, including rules for request parameters and return values, are stipulated in this agreement."}),"\n",(0,r.jsx)(n.h2,{id:"interface-validation",children:"Interface Validation"}),"\n",(0,r.jsxs)(n.p,{children:["To call the API interfaces, user authentication information must be added to the request headers. For details, please refer to  ",(0,r.jsx)(n.a,{href:"./api-validate",children:"Interface Validation"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"api-list",children:"API List"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{children:"Request Operation"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Start Approval"}),(0,r.jsx)(n.td,{children:"POST"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Save Approval as Draft"}),(0,r.jsx)(n.td,{children:"POST"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Submit Draft Application"}),(0,r.jsx)(n.td,{children:"POST"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Submit Approval Request"}),(0,r.jsx)(n.td,{children:"POST"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"api-specifications",children:"API Specifications"}),"\n",(0,r.jsx)(n.p,{children:"Below are the detailed specifications for each workflow API."}),"\n",(0,r.jsx)(n.h3,{id:"start-approval",children:"Start Approval"}),"\n",(0,r.jsx)(n.p,{children:"Create a new approval request in draft status."}),"\n",(0,r.jsx)(n.h4,{id:"uri",children:"URI"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"/api/workflow/v2/draft\n"})}),"\n",(0,r.jsx)(n.h4,{id:"method",children:"Method"}),"\n",(0,r.jsx)(n.p,{children:"POST"}),"\n",(0,r.jsx)(n.h4,{id:"request-parameters",children:"Request Parameters"}),"\n",(0,r.jsx)(n.p,{children:"The following parameters are required when requesting this interface."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"instance"}),(0,r.jsx)(n.td,{children:"object"}),(0,r.jsx)(n.td,{children:"Approval Form Field Values"})]})})]}),"\n",(0,r.jsx)(n.p,{children:"The 'instance' attribute is described as follows:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"space"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Workspace ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"flow"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Process ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"applicant"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Applicant ID"})]})]})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "instance": {\n        "space": "hKdnwE55WcnWveYxS",\n        "flow": "BayiYu3sk2hv3M2HW",\n        "applicant": "62ede4f62161e377e35de58c"\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"response",children:"Response"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The format of the return value when the API interface request is successful is as follows:"}),"\n"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"instance"}),(0,r.jsx)(n.td,{children:"object"}),(0,r.jsx)(n.td,{children:"Approval form field value"})]})})]}),"\n",(0,r.jsx)(n.p,{children:"Where the instance property is described as follows:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"_id"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"The successfully created application form ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"space"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Workspace ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"flow"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Workflow ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"flow_version"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Workflow version ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"form"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Form  ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"form_version"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Form version ID"})]})]})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "instance": {\n        "_id": "zMiGNe2sJm9KuruvM",\n        "space": "hKdnwE55WcnWveYxS",\n        "flow": "BayiYu3sk2hv3M2HW",\n        "flow_version": "Nvc5wjsgHYkXnNHhk",\n        "form": "Pdq8neQvT7fv5aTyd",\n        "form_version": "thX4kKBAx6iCgciWD"\n    }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"The instance returned in the response contains information about the successfully created approval record."}),"\n",(0,r.jsx)(n.h3,{id:"save-draft-approval-form",children:"Save Draft Approval Form"}),"\n",(0,r.jsx)(n.h4,{id:"uri-1",children:"URI"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"/api/workflow/v2/instance/save\n"})}),"\n",(0,r.jsx)(n.h4,{id:"method-1",children:"Method"}),"\n",(0,r.jsx)(n.p,{children:"POST"}),"\n",(0,r.jsx)(n.h4,{id:"request-parameters-1",children:"Request parameters."}),"\n",(0,r.jsx)(n.p,{children:"The following parameters need to be passed when requesting this API."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"instance"}),(0,r.jsx)(n.td,{children:"object"}),(0,r.jsx)(n.td,{children:"Approval Form Field Values"})]})})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "instance": {\n        "_id": "zMiGNe2sJm9KuruvM",\n        "space": "hKdnwE55WcnWveYxS",\n        "flow": "BayiYu3sk2hv3M2HW",\n        "flow_version": "Nvc5wjsgHYkXnNHhk",\n        "form": "Pdq8neQvT7fv5aTyd",\n        "form_version": "thX4kKBAx6iCgciWD",\n        "applicant": "62ede4f62161e377e35de58c",\n        "applicant_name": "xxx",\n        "applicant_organization": "XypyNbzGCJbHMNyWv",\n        "applicant_organization_name": "xxx",\n        "applicant_organization_fullname": "xxx",\n        "code": "",\n        "traces": [\n            {\n                "_id": "7f316cb404fddf2098c8fd2d",\n                "approves": [\n                    {\n                        "_id": "97628d0b9a33b541816caeeb",\n                        "description": "",\n                        "values": {\n                            "field1": "xx",\n                            "field2": "xx",\n                            "field3": "xx"\n                        },\n                        "next_steps": [\n                            {\n                                "step": "e28faf97-a1c4-4bdd-90e5-1b43d42aa10b",\n                                "users": []\n                            }\n                        ]\n                    }\n                ]\n            }\n        ],\n        "submit_date": xxx\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"response-1",children:"Response"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The format of the successful API interface request response is as follows:"}),"\n"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"instance"}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"Was the operation successful?"})]})})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "instance": true\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"submitting-a-draft-application",children:"Submitting a Draft Application"}),"\n",(0,r.jsx)(n.p,{children:"Submit an application in draft status to the next step"}),"\n",(0,r.jsx)(n.h4,{id:"uri-2",children:"URI"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"/api/workflow/submit\n"})}),"\n",(0,r.jsx)(n.h4,{id:"method-2",children:"Method"}),"\n",(0,r.jsx)(n.p,{children:"POST"}),"\n",(0,r.jsx)(n.h4,{id:"request-parameters-2",children:"Request Parameters"}),"\n",(0,r.jsx)(n.p,{children:"The following parameters need to be passed when requesting this API."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Instances"}),(0,r.jsx)(n.td,{children:"object[]"}),(0,r.jsx)(n.td,{children:"The content of the application form."})]})})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "Instances": [{\n        "_id": "e6viWhvARgo4xSxBC",\n        "inbox_users": [],\n        "name": "Test",\n        "submitter": "62ede4f62161e377e35de58c",\n        "flow": "BayiYu3sk2hv3M2HW",\n        "applicant": "62ede4f62161e377e35de58c",\n        "traces": [{\n            "_id": "0aed02a8113d7e1a22d5a245",\n            "step": "Ryu58zkQKrFLdvWpw",\n            "approves": [{\n                "_id": "5865e212c0e80024005090f9",\n                "description": "",\n                "values": {\n                    "field1": "xxx",\n                    "field2": "xxx",\n                    "field3": "xxx"\n                },\n                "next_steps": [{\n                    "step": "e28faf97-a1c4-4bdd-90e5-1b43d42aa10b",\n                    "users": [\n                        "62ede4f62161e377e35de58c"\n                    ]\n                }]\n            }]\n        }]\n    }]\n}\n'})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"The traces contains the signature history for each step, while approves contains the approval process within each signature history, which records detailed information about the approval form."}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"response-2",children:"Response"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"When this API interface is requested successfully, the format of the return value is as follows:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "result": [...]\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"The result returns an array of objects. The key-value information contained in this array is shown as follows:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"alerts"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Prompt messages"})]})})]}),"\n",(0,r.jsx)(n.p,{children:"The alerts mainly prompts whether the process version has been upgraded."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"When this API interface fails to request, the format of the return value is as follows:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    errors: [{ errorMessage: "..." }]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"submitting-an-approval-application",children:"Submitting an Approval Application"}),"\n",(0,r.jsx)(n.p,{children:"Submit an application in approval status to the next step."}),"\n",(0,r.jsx)(n.h4,{id:"uri-3",children:"URI"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"/api/workflow/engine\n"})}),"\n",(0,r.jsx)(n.h4,{id:"method-3",children:"Method"}),"\n",(0,r.jsx)(n.p,{children:"POST"}),"\n",(0,r.jsx)(n.h4,{id:"request-parameters-3",children:"Request Parameters"}),"\n",(0,r.jsx)(n.p,{children:"The following parameters need to be passed when requesting this API."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Approvals"}),(0,r.jsx)(n.td,{children:"object[]"}),(0,r.jsx)(n.td,{children:"The content of the approval"})]})})]}),"\n",(0,r.jsx)(n.h4,{id:"response-3",children:"Response"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"When this API interface is requested successfully, an empty object is returned."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"When this API interface fails to request, the format of the return value is as follows:"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    errors: [{ errorMessage: "..." }]\n}\n'})})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var r=s(96540);const i={},t=r.createContext(i);function l(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);