"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8302],{15697:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>d,toc:()=>a});var t=s(74848),o=s(28453);const r={title:"Intranet",sidebar_position:4,sidebar_class_name:"hidden"},l=void 0,d={id:"deploy/intranet",title:"Intranet",description:"Follow the steps below to deploy Steedos in an Ubuntu 20.04 intranet environment.",source:"@site/docs/deploy/intranet.md",sourceDirName:"deploy",slug:"/deploy/intranet",permalink:"/deploy/intranet",draft:!1,unlisted:!1,editUrl:"https://github.com/steedos/steedos-docs/tree/master/docs/deploy/intranet.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Intranet",sidebar_position:4,sidebar_class_name:"hidden"},sidebar:"platform",previous:{title:"Kubernetes",permalink:"/deploy/deploy-k8s"},next:{title:"Instance Configuration",permalink:"/deploy/steedos-config"}},i={},a=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installing Docker",id:"installing-docker",level:2},{value:"Installing Steedos",id:"installing-steedos",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Follow the steps below to deploy Steedos in an Ubuntu 20.04 intranet environment."}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://releases.ubuntu.com/20.04/",children:"Ubuntu"})," (Version 20.04) intranet server."]}),"\n",(0,t.jsx)(n.li,{children:"A Linux server with a pre-installed Docker service, which requires access to the external network."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"installing-docker",children:"Installing Docker"}),"\n",(0,t.jsx)(n.p,{children:"Please download on a connected Linux server:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Visit the link: ",(0,t.jsx)(n.a,{href:"https://download.docker.com/linux/ubuntu/dists/focal/pool/stable/",children:"https://download.docker.com/linux/ubuntu/dists/focal/pool/stable/"})]}),"\n",(0,t.jsx)(n.li,{children:"Based on the applicable architecture (amd64, armhf, arm64, or s390x), download the required deb files for the intranet environment and upload them to the tmp directory of the intranet server."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"# Docker Engine\ndocker-ce_24.0.7-1~ubuntu.20.04~focal_amd64.deb\n\n# Docker CLI\ndocker-ce-cli_24.0.7-1~ubuntu.20.04~focal_amd64.deb\n\n# Docker Container\ncontainerd.io_1.6.9-1_amd64.deb\n\n# Docker Compose\ndocker-compose-plugin_2.6.0~ubuntu-focal_amd64.deb\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:"Navigate to the tmp directory on the intranet server and install the .deb packages."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"sudo dpkg -i ./containerd.io_1.6.9-1_amd64.deb \\\n    ./docker-ce_24.0.7-1~ubuntu.20.04~focal_amd64.deb \\\n    ./docker-ce-cli_24.0.7-1~ubuntu.20.04~focal_amd64.deb \\\n    ./docker-compose-plugin_2.6.0~ubuntu-focal_amd64.deb\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsx)(n.li,{children:"After installation, check the Docker version."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"docker -v\nDocker version 24.0.7, build afdd53b\n"})}),"\n",(0,t.jsx)(n.h2,{id:"installing-steedos",children:"Installing Steedos"}),"\n",(0,t.jsxs)(n.p,{children:["On your intranet server, create a folder named ",(0,t.jsx)(n.code,{children:"steedos"})," for deployment and data storage."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Create ",(0,t.jsx)(n.code,{children:"docker-compose.yml"})," file:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yml",children:'version: "3.9"\n\nservices:\n\n  steedos:\n    image: steedos/steedos-community:2.6\n    ports:\n      - "5000:5000"    # Steedos\n      - "27017:27017"  # MongoDB\n      - "9001:9001"    # Supervisor\n      - "6379:6379"    # Redis\n    env_file:\n      - .env\n    volumes:\n      - "./steedos-storage:/steedos-storage"\n'})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["Create ",(0,t.jsx)(n.code,{children:".env"})," file:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"PORT=80\nROOT_URL=http://serverip\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsxs)(n.li,{children:["View the ",(0,t.jsx)(n.code,{children:"docker-compose.yml"})," file and download the relevant images."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"docker pull steedos/steedos-community:2.6\ndocker pull redis:6.2.10\ndocker pull mongo:4.4\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsx)(n.li,{children:"Save the downloaded images as rar format files and upload them to the tmp directory of the intranet server."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"docker save -o steedos-community.rar steedos/steedos-community:2.6\ndocker save -o redis.rar redis:6.2.10\ndocker save -o mongo.rar mongo:4.4\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"5",children:["\n",(0,t.jsx)(n.li,{children:"Navigate to the tmp directory on the intranet server and sequentially load the images."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"docker load < steedos-community.rar\ndocker load < redis.rar\ndocker load < mongo.rar\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"6",children:["\n",(0,t.jsxs)(n.li,{children:["Navigate to the ",(0,t.jsx)(n.code,{children:"steedos"})," directory on the intranet server and use the following command to start the Docker containers. If you don't have permission to run ",(0,t.jsx)(n.code,{children:"docker compose"}),", you might need to use ",(0,t.jsx)(n.code,{children:"sudo"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"docker compose up -d\n"})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var t=s(96540);const o={},r=t.createContext(o);function l(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);