"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5337],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=a.createContext({}),d=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=d(e.components);return a.createElement(i.Provider,{value:t},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,i=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=d(n),m=o,f=c["".concat(i,".").concat(m)]||c[m]||p[m]||r;return n?a.createElement(f,l(l({ref:t},u),{},{components:n})):a.createElement(f,l({ref:t},u))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,l=new Array(r);l[0]=m;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s[c]="string"==typeof e?e:o,l[1]=s;for(var d=2;d<r;d++)l[d]=n[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},85162:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(67294),o=n(86010);const r={tabItem:"tabItem_Ymn6"};function l(e){let{children:t,hidden:n,className:l}=e;return a.createElement("div",{role:"tabpanel",className:(0,o.Z)(r.tabItem,l),hidden:n},t)}},74866:(e,t,n)=>{n.d(t,{Z:()=>w});var a=n(87462),o=n(67294),r=n(86010),l=n(12466),s=n(16550),i=n(91980),d=n(67392),u=n(50012);function c(e){return function(e){return o.Children.map(e,(e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:o}}=e;return{value:t,label:n,attributes:a,default:o}}))}function p(e){const{values:t,children:n}=e;return(0,o.useMemo)((()=>{const e=t??c(n);return function(e){const t=(0,d.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function m(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function f(e){let{queryString:t=!1,groupId:n}=e;const a=(0,s.k6)(),r=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,i._X)(r),(0,o.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(a.location.search);t.set(r,e),a.replace({...a.location,search:t.toString()})}),[r,a])]}function h(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,r=p(e),[l,s]=(0,o.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:r}))),[i,d]=f({queryString:n,groupId:a}),[c,h]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,r]=(0,u.Nk)(n);return[a,(0,o.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:a}),g=(()=>{const e=i??c;return m({value:e,tabValues:r})?e:null})();(0,o.useLayoutEffect)((()=>{g&&s(g)}),[g]);return{selectedValue:l,selectValue:(0,o.useCallback)((e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);s(e),d(e),h(e)}),[d,h,r]),tabValues:r}}var g=n(72389);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function v(e){let{className:t,block:n,selectedValue:s,selectValue:i,tabValues:d}=e;const u=[],{blockElementScrollPositionUntilNextRender:c}=(0,l.o5)(),p=e=>{const t=e.currentTarget,n=u.indexOf(t),a=d[n].value;a!==s&&(c(t),i(a))},m=e=>{let t=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":{const n=u.indexOf(e.currentTarget)+1;t=u[n]??u[0];break}case"ArrowLeft":{const n=u.indexOf(e.currentTarget)-1;t=u[n]??u[u.length-1];break}}t?.focus()};return o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},t)},d.map((e=>{let{value:t,label:n,attributes:l}=e;return o.createElement("li",(0,a.Z)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:e=>u.push(e),onKeyDown:m,onClick:p},l,{className:(0,r.Z)("tabs__item",b.tabItem,l?.className,{"tabs__item--active":s===t})}),n??t)})))}function y(e){let{lazy:t,children:n,selectedValue:a}=e;const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=r.find((e=>e.props.value===a));return e?(0,o.cloneElement)(e,{className:"margin-top--md"}):null}return o.createElement("div",{className:"margin-top--md"},r.map(((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function k(e){const t=h(e);return o.createElement("div",{className:(0,r.Z)("tabs-container",b.tabList)},o.createElement(v,(0,a.Z)({},e,t)),o.createElement(y,(0,a.Z)({},e,t)))}function w(e){const t=(0,g.Z)();return o.createElement(k,(0,a.Z)({key:String(t)},e))}},44384:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var a=n(87462),o=(n(67294),n(3905));n(74866),n(85162);const r={sidebar_label:"Windows",sidebar_position:5},l="Windows Development Environment Deployment Guide",s={unversionedId:"deploy/deploy-windows",id:"deploy/deploy-windows",title:"Windows Development Environment Deployment Guide",description:"This tutorial takes my-app as an example, guiding you on how to locally deploy and run a project developed based on Steedos2.5 in the Windows system. After the deployment, you can develop Steedos projects.",source:"@site/docs/deploy/deploy-windows.md",sourceDirName:"deploy",slug:"/deploy/deploy-windows",permalink:"/deploy/deploy-windows",draft:!1,editUrl:"https://github.com/steedos/steedos-docs/tree/master/docs/deploy/deploy-windows.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_label:"Windows",sidebar_position:5},sidebar:"platform",previous:{title:"Intranet",permalink:"/deploy/intranet"},next:{title:"Try with Gitpod",permalink:"/deploy/gitpod"}},i={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Deployment Steps",id:"deployment-steps",level:2},{value:"1. Install Nodejs",id:"1-install-nodejs",level:3},{value:"Install yarn command",id:"install-yarn-command",level:4},{value:"Install steedos command",id:"install-steedos-command",level:4},{value:"2. Install MongoDB",id:"2-install-mongodb",level:3},{value:"Configure mongodb cluster mode startup",id:"configure-mongodb-cluster-mode-startup",level:4},{value:"3. Install Redis",id:"3-install-redis",level:3},{value:"4. Install VS Code",id:"4-install-vs-code",level:3},{value:"5. Install Steedos",id:"5-install-steedos",level:3},{value:"Create a project",id:"create-a-project",level:4},{value:"Enable platform core service",id:"enable-platform-core-service",level:4},{value:"Start the software package service",id:"start-the-software-package-service",level:4}],u={toc:d},c="wrapper";function p(e){let{components:t,...n}=e;return(0,o.kt)(c,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"windows-development-environment-deployment-guide"},"Windows Development Environment Deployment Guide"),(0,o.kt)("p",null,"This tutorial takes my-app as an example, guiding you on how to locally deploy and run a project developed based on Steedos2.5 in the Windows system. After the deployment, you can develop Steedos projects."),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("p",null,"Before starting, please ensure that your system meets the following requirements:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Windows 10 Professional Edition 22H2 latest version")),(0,o.kt)("h2",{id:"deployment-steps"},"Deployment Steps"),(0,o.kt)("h3",{id:"1-install-nodejs"},"1. Install Nodejs"),(0,o.kt)("p",null,"Download the last version of Nodejs 14, which we recommend, ",(0,o.kt)("a",{parentName:"p",href:"https://nodejs.org/download/release/v14.21.3/node-v14.21.3-x64.msi"},"14.21.3")," from the official website and install it after downloading."),(0,o.kt)("p",null,"For more versions, please refer to ",(0,o.kt)("a",{parentName:"p",href:"https://nodejs.org/en/download/releases/"},"https://nodejs.org/en/download/releases/"),". We have not fully tested other versions. If you need to use other versions, please refer to the Node.js long-term maintenance version schedule ",(0,o.kt)("a",{parentName:"p",href:"https://nodejs.org/en/about/previous-releases"},"https://nodejs.org/en/about/previous-releases")),(0,o.kt)("p",null,'Note: During installation, please select "Automatically install the necessary tools" to automatically install the required tools.'),(0,o.kt)("h4",{id:"install-yarn-command"},"Install yarn command"),(0,o.kt)("p",null,"After installing nodejs, open the terminal and execute the following command to install yarn"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"npm install -g yarn\n")),(0,o.kt)("h4",{id:"install-steedos-command"},"Install steedos command"),(0,o.kt)("p",null,"Install or update the Steedos CLI command tool"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"npm i steedos-cli --global\n")),(0,o.kt)("h3",{id:"2-install-mongodb"},"2. Install MongoDB"),(0,o.kt)("p",null,"Refer to the official ",(0,o.kt)("a",{parentName:"p",href:"https://www.mongodb.com/docs/v4.4/tutorial/install-mongodb-on-windows/"},"documentation")," to install the database, and it is recommended to install ",(0,o.kt)("a",{parentName:"p",href:"https://fastdl.mongodb.org/windows/mongodb-windows-x86_64-4.4.27-rc0-signed.msi"},"4.4"),"."),(0,o.kt)("p",null,"When installing, please select to install MongoDB Compass, which is a visualization operation tool that comes with the Mongo windows installation package."),(0,o.kt)("p",null,"After successful installation, add the installation path to the system environment variables, for example: C:\\Program Files\\MongoDB\\Server\\4.4\\bin"),(0,o.kt)("h4",{id:"configure-mongodb-cluster-mode-startup"},"Configure mongodb cluster mode startup"),(0,o.kt)("p",null,"Modify mongod.cfg in the installation path of mongodb, for example: C:\\Program Files\\MongoDB\\Server\\4.4\\bin\\mongod.cfg"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# mongod.conf\n\n# for documentation of all options, see:\n#   http://docs.mongodb.org/manual/reference/configuration-options/\n\n# Where and how to store data.\n...\n\n#  Find replication, remove the # and add a line of configuration\nreplication:\n  #  The following configuration must be indented by two spaces\n  replSetName: rs0\n")),(0,o.kt)("p",null,"Find the MongoDB service in Task Manager-Services and right-click to restart."),(0,o.kt)("h3",{id:"3-install-redis"},"3. Install Redis"),(0,o.kt)("p",null,"Find the ",(0,o.kt)("a",{parentName:"p",href:"https://www-steedos-com.oss-cn-beijing.aliyuncs.com/steedos/platform/bin/redis/Redis-x64-3.2.100.msi"},"installer")," through the Windows version of the Redis library and install the Redis service."),(0,o.kt)("p",null,"It is recommended to choose to add the redis installation path to PATH during installation."),(0,o.kt)("p",null,"Please note that after the installation of Redis is complete, the following configuration needs to be added to the redis configuration file, for example: C:\\Program Files\\Redis\\redis.windows.conf, to prevent Redis from reporting an error when starting the project: Redis-sub client is disconnected."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"client-output-buffer-limit normal 0 0 0\nclient-output-buffer-limit pubsub 0 0 0\nclient-output-buffer-limit slave 0 0 0\n")),(0,o.kt)("h3",{id:"4-install-vs-code"},"4. Install VS Code"),(0,o.kt)("p",null,'Visual Studio Code (abbreviated as "VS Code") is a cross-platform source code editor released by Microsoft that runs on Mac OS X, Windows, and Linux, targeted at writing modern Web and cloud applications.'),(0,o.kt)("p",null,"Download the ",(0,o.kt)("a",{parentName:"p",href:"https://vscode.download.prss.microsoft.com/dbazure/download/stable/0ee08df0cf4527e40edc9aa28f4b5bd38bbff2b2/VSCodeUserSetup-x64-1.85.1.exe"},"installer")," from the official website and install and run VS Code."),(0,o.kt)("h3",{id:"5-install-steedos"},"5. Install Steedos"),(0,o.kt)("h4",{id:"create-a-project"},"Create a project"),(0,o.kt)("p",null,"Create a my-app project by executing the command npx create-steedos-app my-app in the terminal."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npx create-steedos-app my-app\n")),(0,o.kt)("p",null,'After executing the above command, a folder named "my-app" will be created in the current document folder, and its main directory structure is:'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"my-app\n\u251c\u2500\u2500 .vscode\n\u251c\u2500\u2500 steedos-packages\n\u251c\u2500\u2500 steedos-platform\n\u251c\u2500\u2500 .env\n\u251c\u2500\u2500\n\n .gitpod.yml\n\u251c\u2500\u2500 moleculer.config.js\n\u251c\u2500\u2500 package.json\n\u2514\u2500\u2500 README.md\n")),(0,o.kt)("p",null,"Among them,"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"steedos-packages"),": When your project needs sub-package management, this folder can be used. You can also copy third-party software packages to this folder, and Steedos will automatically load the metadata in it when it starts."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"steedos-platform"),": Steedos core service. When starting a software package service, the core service must be enabled first. If you need to upgrade the steedos core version, you also need to modify the package.json file in this folder."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"moleculer.config.js"),": Configuration file for running services with moleculer."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},".env"),": Environment variable configuration file, where you can configure ports, URLs, and other environment variables."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"package.json"),": Used to configure npm packages on which this project depends.")),(0,o.kt)("h4",{id:"enable-platform-core-service"},"Enable platform core service"),(0,o.kt)("p",null,'Use VS Code to open the my-app folder, click "Terminal" to open a command window, enter steedos-platform and install the packages the project depends on'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cd steedos-platform\nyarn\n")),(0,o.kt)("p",null,"Copy .env to .env.local, used to configure the environment variables of the running service, specify the MongoDB address, Redis service address, and ROOT_URL (default is 127.0.0.1, can be modified to the server's own ip):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# https://docs.steedos.com/deploy/steedos-config\n\nPORT=5000\nROOT_URL=http://127.0.0.1\nTRANSPORTER=redis://127.0.0.1:6379\nCACHER=redis://127.0.0.1:6379/1\nMONGO_URL=mongodb://127.0.0.1:27017/steedos\nMONGO_OPLOG_URL=mongodb://127.0.0.1:27017/local\n\nSTEEDOS_STORAGE_DIR=./steedos-storage\n")),(0,o.kt)("p",null,"Execute yarn start to enable the service:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn start\n")),(0,o.kt)("h4",{id:"start-the-software-package-service"},"Start the software package service"),(0,o.kt)("p",null,"Enter the project root path in the terminal to install the dependent packages, for example, enter my-app:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn \n")),(0,o.kt)("p",null,"Copy .env to .env.local, used to configure the environment variables of the running service, and the TRANSPORTER needs to be configured to be consistent with the TRANSPORTER in the core service steedos-platform:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"TRANSPORTER=redis://127.0.0.1:6379\n\n# VSCode code sync\nMETADATA_SERVER=http://127.0.0.1:5000\nMETADATA_APIKEY=\nDEFAULT_PACKAGE_PATH=steedos-packages/contract\n")),(0,o.kt)("p",null,"Execute yarn start to enable the service:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn start\n")),(0,o.kt)("p",null,"After the service is successfully enabled, access the service using the configured IP address and port, for example: ",(0,o.kt)("a",{parentName:"p",href:"http://127.0.0.1:5000"},"http://127.0.0.1:5000")),(0,o.kt)("hr",null))}p.isMDXComponent=!0}}]);