"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5250],{66041:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>l});var t=i(74848),o=i(28453);const a={},s="Linkage Mechanism",r={id:"developer/micro-page/amis/linkage",title:"Linkage Mechanism",description:"In AMIS, the linkage mechanism is an important feature for achieving dynamic page interactions. Through linkage, components can be controlled to show, hide, or disable based on certain conditions, or to trigger interface requests. Linkage configurations are usually based on expressions.",source:"@site/docs/developer/micro-page/amis/6_linkage.md",sourceDirName:"developer/micro-page/amis",slug:"/developer/micro-page/amis/linkage",permalink:"/developer/micro-page/amis/linkage",draft:!1,unlisted:!1,editUrl:"https://github.com/steedos/steedos-docs/tree/master/docs/developer/micro-page/amis/6_linkage.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{},sidebar:"developer",previous:{title:"Expressions",permalink:"/developer/micro-page/amis/expression"},next:{title:"Event Actions",permalink:"/developer/micro-page/amis/event"}},c={},l=[{value:"Basic Linkage",id:"basic-linkage",level:3},{value:"Interface Linkage",id:"interface-linkage",level:3},{value:"Configuring Request Conditions",id:"configuring-request-conditions",level:4}];function d(e){const n={code:"code",h1:"h1",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"linkage-mechanism",children:"Linkage Mechanism"}),"\n",(0,t.jsx)(n.p,{children:"In AMIS, the linkage mechanism is an important feature for achieving dynamic page interactions. Through linkage, components can be controlled to show, hide, or disable based on certain conditions, or to trigger interface requests. Linkage configurations are usually based on expressions."}),"\n",(0,t.jsx)(n.h3,{id:"basic-linkage",children:"Basic Linkage"}),"\n",(0,t.jsxs)(n.p,{children:["Basic linkage mainly involves the display, hiding, and disabling states of components. For example, when a specific option is selected in a radio button, a text box is shown or hidden; or when a certain option is selected, another text box becomes disabled. In form item linkage, the value of hidden form items is not removed from the current data domain by default, but can be removed upon submission by adding the ",(0,t.jsx)(n.code,{children:"clearValueOnHidden"})," property."]}),"\n",(0,t.jsx)(n.p,{children:"Suppose we have a form that includes a radio button (radio) and two text boxes (text1 and text2). We want to achieve the following linkage effects:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Text1 is only displayed when radio selects type 1."}),"\n",(0,t.jsx)(n.li,{children:"When radio selects type 2, text2 becomes disabled."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"To achieve this linkage effect, we can use expressions to configure the linkage rules. Here is an example of the corresponding JSON configuration:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "type": "page",\n  "body": {\n    "type": "form",\n    "body": [\n      {\n        "type": "radios",\n        "name": "foo",\n        "label": false,\n        "options": [\n          {\n            "label": "Type 1",\n            "value": 1\n          },\n          {\n            "label": "Type 2",\n            "value": 2\n          }\n        ]\n      },\n      {\n        "type": "input-text",\n        "name": "text1",\n        "label": false,\n        "placeholder": "Visible when Type 1 is selected",\n        "visibleOn": "${foo == 1}"\n      },\n      {\n        "type": "input-text",\n        "name": "text2",\n        "label": false,\n        "placeholder": "Disabled when Type 2 is selected",\n        "disabledOn": "${foo == 2}"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"In this configuration:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"visibleOn"}),' property controls the display of the text1 text box. When the value of the radio button is "type1", the text1 text box will be displayed.']}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"disabledOn"}),' property controls the disabled state of the text2 text box. When the value of the radio button is "type2", the text2 text box will be disabled.']}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"With such a configuration, we have achieved a basic linkage effect, allowing the form's behavior to dynamically change based on user selection."}),"\n",(0,t.jsx)(n.h3,{id:"interface-linkage",children:"Interface Linkage"}),"\n",(0,t.jsxs)(n.p,{children:["Interface linkage is another common scenario, for example, when selecting an option from a dropdown, it triggers a new request for another dropdown's options. This is achieved by using data mapping in the initialization interface link. When the referenced variable value changes, the interface automatically requests again. Interface linkage is often applicable to initialization interfaces, such as the form's ",(0,t.jsx)(n.code,{children:"initApi"}),", the ",(0,t.jsx)(n.code,{children:"source"})," option source interface URL of the select component, etc."]}),"\n",(0,t.jsx)(n.p,{children:"Suppose we have a form that includes a dropdown box (select) and a cascading dropdown box (cascader). We want to achieve the following linkage effect:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"When the user selects an option in the first dropdown box, the cascading dropdown box triggers an interface request based on the selected item, dynamically loading the corresponding options."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["To achieve this linkage effect, we can use data mapping in the ",(0,t.jsx)(n.code,{children:"source"})," property of the cascading dropdown box to dynamically construct the interface request. Here is an example of the corresponding JSON configuration:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "type": "page",\n  "body": {\n    "title": "",\n    "type": "form",\n    "mode": "horizontal",\n    "body": [\n      {\n        "label": "Option 1",\n        "type": "radios",\n        "name": "a",\n        "inline": true,\n        "options": [\n          {\n            "label": "Option A",\n            "value": 1\n          },\n          {\n            "label": "Option B",\n            "value": 2\n          },\n          {\n            "label": "Option C",\n            "value": 3\n          }\n        ]\n      },\n      {\n        "label": "Option 2",\n        "type": "select",\n        "size": "sm",\n        "name": "b",\n        "source": "/amis/api/mock2/options/level2?a=${a}",\n        "description": "Switching the value of <code>Option 1</code> will trigger the <code>source</code> interface of <code>Option 2</code> to fetch again"\n      }\n    ],\n    "actions": []\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"In this configuration:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"The first dropdown box (select) allows the user to choose a category."}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"source"})," property of the second dropdown box (select) uses data mapping ",(0,t.jsx)(n.code,{children:"${category}"})," to dynamically construct the URL for the interface request. When the value of ",(0,t.jsx)(n.code,{children:"category"})," changes (i.e., the user selects an option in the first dropdown box), the second dropdown box triggers an interface request based on the new URL, loading the options for the corresponding category."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"With such a configuration, we have achieved an interface linkage effect, allowing the component's data to dynamically update based on user selection."}),"\n",(0,t.jsx)(n.h4,{id:"configuring-request-conditions",children:"Configuring Request Conditions"}),"\n",(0,t.jsx)(n.p,{children:"By default, the linked interface is always requested when the variable changes. However, request conditions can be configured so that the interface is only requested when a certain value in the current data domain meets specific conditions.\nSuppose we have a form that"})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>r});var t=i(96540);const o={},a=t.createContext(o);function s(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);